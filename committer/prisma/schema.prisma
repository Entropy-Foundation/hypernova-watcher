generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model SourceTx {
  txHash       String   @id // Primary Key
  chainId      String
  toChainId    String
  msgId        String
  asset        String
  amount       String
  senderAddr   String
  receiverAddr String
  timestamp    DateTime @default(now())
  block        String
  txData       TxData?
}

model DestTx {
  txHash      String   @id // Primary Key
  chainId     String
  fromChainId String
  msgId       String
  asset       String
  amount      String
  timestamp   DateTime @default(now())
  block       String
  txData      TxData?
}

model TxData {
  id           String   @id @default(uuid())
  sourceTx     SourceTx @relation(fields: [sourceTxHash], references: [txHash])
  sourceTxHash String   @unique
  destTx       DestTx?   @relation(fields: [destTxHash], references: [txHash])
  destTxHash   String?   @unique
  status       Status
  message      Bytes?
  createdAt    DateTime @default(now())
}

enum Status {
  SENT
  RECEIVED
}
